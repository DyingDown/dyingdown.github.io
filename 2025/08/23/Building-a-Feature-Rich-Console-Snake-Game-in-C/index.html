<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Building a Feature-Rich Console Snake Game in C# [ o_oyao's Blog ]</title><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/includes/header.css"><link rel="stylesheet" href="/css/includes/footer.css"><link rel="stylesheet" href="/css/includes/locate-button.css"><link rel="stylesheet" href="/css/includes/pagination.css"><link rel="stylesheet" href="/css/last.css"><link rel="stylesheet" href="/font-awesome/css/all.min.css"><link rel="stylesheet" href="/css/includes/alert/alert.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="/css/third-party/share.min.css"><link rel="stylesheet" href="/css/article/simple.css"><link rel="stylesheet" href="/css/includes/side-user.css"><link rel="stylesheet" href="/css/includes/toc.css"><link rel="stylesheet" href="/css/includes/copyright.css"><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><link rel="stylesheet" href="/css/last.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.32.2/tocbot.min.js"></script><script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><script>var isHome = false;
var isCenter = false;
var i18n = {
    copy: {
        success: "Copy successful!",
        error: "Copy failed, please try again!"
    }
};
</script><meta name="generator" content="Hexo 6.3.0"></head><body class="post"><!-- Mixins, used on or off of the page--><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"><div id="menu-outer"><div class="site-name"><a href=""> <?xml version="1.0" standalone="no"?>
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"  width="300.000000pt" height="125.000000pt" viewBox="0 0 300.000000 125.000000" preserveAspectRatio="xMidYMid meet"  id="site-logo">
<metadata><Created>by potrace 1.10, written by Peter Selinger 2001-2011</Created></metadata>
<g transform="translate(0.000000,125.000000) scale(0.100000,-0.100000)"  stroke="none">
<path class="rest-content" d="M70 635 c0 -340 4 -545 10 -545 5 0 335 27 734 60 399 33 730 60 736 60 6 0 10 28 10 70 0 56 -3 70 -15 70 -12 0 -15 -13 -15 -55 0 -48 -3 -55 -20 -55 -10 0 -320 -25 -688 -55 -368 -30 -679 -55 -691 -55 l-21 0 0 505 c0 474 1 505 18 505 9 0 316 -25 682 -55 366 -30 677 -55 693 -55 26 0 27 -2 27 -55 0 -42 3 -55 15 -55 12 0 15 14 15 70 0 55 -3 70 -15 70 -8 0 -341 27 -740 60 -399 33 -727 60 -730 60 -3 0 -5 -245 -5 -545z"/>
<path class="rest-content" d="M301 858 c-62 -33 -94 -94 -88 -166 6 -81 51 -131 139 -154 85 -22 204 19 238 83 23 42 24 115 1 161 -32 66 -79 92 -170 96 -65 3 -83 0 -120 -20z m140 -97 c14 -46 5 -124 -17 -142 -12 -10 -18 -9 -32 5 -22 21 -24 135 -3 159 22 27 39 20 52 -22z"/>
<path class="rest-content" d="M1230 858 c-24 -13 -53 -35 -64 -50 -24 -34 -33 -126 -16 -168 17 -42 72 -87 122 -101 82 -22 198 11 234 66 38 58 36 150 -4 204 -53 71 -182 94 -272 49z m127 -70 c27 -34 20 -151 -9 -169 -23 -15 -48 28 -48 81 0 81 28 124 57 88z"/>
<path class="rest-content" d="M1633 872 c-22 -14 -33 -63 -33 -149 0 -69 4 -93 22 -124 30 -54 76 -74 139 -62 43 9 49 8 49 -7 0 -50 -60 -66 -128 -36 -70 32 -99 -5 -44 -56 37 -37 73 -48 146 -48 80 0 121 25 156 95 21 44 25 65 28 195 4 137 3 146 -18 173 -25 31 -72 37 -108 11 -20 -14 -22 -24 -22 -103 0 -99 -15 -135 -47 -115 -15 9 -18 27 -21 105 -2 81 -5 96 -23 112 -22 17 -75 23 -96 9z"/>
<path class="rest-content" d="M2085 847 c-66 -66 -68 -213 -4 -277 38 -38 86 -47 146 -27 31 10 53 12 64 6 10 -5 36 -9 58 -9 62 0 71 20 71 168 0 117 -1 124 -25 147 -28 29 -70 32 -103 10 -19 -14 -24 -14 -51 0 -17 8 -51 15 -77 15 -39 0 -51 -5 -79 -33z m175 -138 c0 -65 -3 -81 -17 -86 -10 -4 -23 2 -36 18 -39 48 -8 170 39 152 10 -4 14 -26 14 -84z"/>
<path class="rest-content" d="M2585 863 c-53 -28 -83 -63 -95 -113 -24 -100 32 -188 133 -210 101 -23 185 6 235 80 20 29 23 45 20 95 -5 74 -33 119 -92 146 -52 23 -158 25 -201 2z m125 -89 c15 -38 12 -117 -5 -141 -45 -64 -84 72 -43 150 13 25 37 21 48 -9z"/>
<path class="rest-content" d="M666 624 c-19 -18 -21 -55 -4 -72 9 -9 69 -12 210 -12 185 0 198 1 208 19 14 27 13 47 -6 65 -23 24 -385 24 -408 0z"/>
</g>
</svg></a></div><div class="search"><input id="local-search-input" tpye="text" placeholder="Type to search"><span class="search-icon"><i class="fa fa-search"></i></span><div class="local-search-result-cls" id="local-search-result" data-empty="(っ╥╯﹏╰╥c) Sorry I can't find the word, please try another word" data-first="First Search, loading index file... please wait"></div></div><div class="menu"><ul class="menu-icon"><li></li><li></li><li></li></ul><ul id="nav"><img class="menu-avatar" src="https://cdn.jsdelivr.net/gh/DyingDown/img-host-repo/202409161940288.png"><div class="menu-items"><li class="item-name"><a class="name-a" href="/"><i class="fas fa-home"></i> Home</a></li><li class="item-name"><a class="name-a" href="#"><i class="fas fa-list"></i> Category</a><ul class="submenu-items"><li class="subitem-name"><a href="/categories/Gallery"><i class="fas fa-camera"></i> Gallery</a></li><li class="subitem-name"><a href="/categories/ACM"><i class="fas fa-code"></i> OJ Prob</a></li><li class="subitem-name"><a href="/novel"><i class="fas fa-book-open"></i> Novel</a></li><li class="subitem-name"><a href="/categories/Essay"><i class="fas fa-feather"></i> Essay</a></li><li class="subitem-name"><a href="/categories/expn"><i class="fas fa-language"></i> English</a></li></ul></li><li class="item-name"><a class="name-a" href="#"><i class="fas fa-lightbulb"></i> About</a><ul class="submenu-items"><li class="subitem-name"><a href="/about"><i class="fas fa-heart"></i> Me</a></li><li class="subitem-name"><a href="/theme-last-guide/site/"><i class="fas fa-puzzle-piece"></i> Theme</a></li></ul></li><li class="item-name"><a class="name-a" href="/archives"><i class="fas fa-archive"></i> Archives</a></li><li class="item-name"><a class="name-a" href="#"><i class="fas fa-cog"></i> Lab</a><ul class="submenu-items"><li class="subitem-name"><a href="/project"><i class="fas fa-paperclip"></i> Project</a></li><li class="subitem-name"><a href="/project/RubikCube/index.html"><i class="fas fa-cube"></i> Rubik's Cube</a></li></ul></li><li class="item-name"><a class="name-a" href="/tags"><i class="fas fa-tag"></i> Tag</a></li><li class="item-name"><a class="name-a" href="/links"><i class="fas fa-link"></i> Friends</a></li></div></ul></div></div><div id="content-outer"><div id="content-inner"><div id="post-outer"><div id="share-col"><div id="shareButtons"><div id="shareButtonsInner"><span class="social-share" data-sites="facebook,twitter,qq,wechat,qzone,weibo"></span></div></div></div><div id="mid-col"><div id="post"><div id="titles"><span class="ribbon"><span class="ri">ORIGIN</span></span><div id="first-line"><h1>Building a Feature-Rich Console Snake Game in C#</h1><div class="date"><span class="post-title-icons"><i class="fa fa-calendar"></i></span><time class="words" datetime="2025-08-23T16:24:03.000Z">2025-08-23</time></div></div><div id="post-information"><a class="category-post"><span class="post-title-icons"><i class="fa fa-book"></i></span><span class="words" href="/categories/C/">C#</span></a><a class="post-tag"><span class="post-title-icons"><i class="fa fa-tag"></i></span><span class="words" href="/tags/Snake-Game/">Snake Game  </span><span class="words" href="/tags/Console-Application/">Console Application  </span></a><span class="post-title-icons"> <i class="fa fa-clock"></i></span><span class="words">24 mins</span><span class="post-title-icons"><i class="fa fa-file-alt"></i></span><span class="words">3.9k words</span></div></div><div id="post-content"><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    CommonHTML: {
        linebreaks: { automatic: true, width: "90% container" }
    },
    "HTML-CSS": { 
        linebreaks: { automatic: true, width: "90% container" }
    },
    "SVG": { 
        linebreaks: { automatic: true, width: "90% container" }
    }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><p>What started as a small classroom exercise—just moving a single player around the console to eat food—quickly grew into something bigger. The more I coded, the more fun it became, and before I knew it, I had expanded the idea into a full Snake game.</p>
<span id="more"></span>

<p>This blog documents the actual development process, focusing on concrete implementation details, entity structures, and how different components interact with each other. </p>
<p><img src="https://cdn.jsdelivr.net/gh/DyingDown/img-host-repo/202508231508513.gif"></p>
<h3 id="Key-Features"><a href="#Key-Features" class="headerlink" title="Key Features"></a>Key Features</h3><ul>
<li><strong>Dual-Player Support</strong>: Two players can play simultaneously with different control schemes</li>
<li><strong>Dynamic Difficulty System</strong>: Four difficulty levels (Easy, Medium, Hard, Hell) with different speeds</li>
<li><strong>Food Expiration Mechanics</strong>: Foods have limited lifetimes and disappear if not consumed</li>
<li><strong>Obstacle Generation</strong>: Configurable random obstacles to increase challenge</li>
</ul>
<h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐</span><br><span class="line">│   PythonGame    │───▶│   SnakeGame     │───▶│ SnakeGameBoard  │</span><br><span class="line">│   (Entry Point) │    │   (Menu Logic)  │    │ (Game Logic)    │</span><br><span class="line">└─────────────────┘    └─────────────────┘    └─────────────────┘</span><br><span class="line">                                │                       │</span><br><span class="line">                                ▼                       ▼</span><br><span class="line">                       ┌─────────────────┐    ┌─────────────────┐</span><br><span class="line">                       │   GameRule      │    │     Snake       │</span><br><span class="line">                       │ (Configuration) │    │   (Entity)      │</span><br><span class="line">                       └─────────────────┘    └─────────────────┘</span><br><span class="line">                                                       │</span><br><span class="line">                                                       ▼</span><br><span class="line">                                              ┌─────────────────┐</span><br><span class="line">                                              │     Food        │</span><br><span class="line">                                              │   (Entity)      │</span><br><span class="line">                                              └─────────────────┘</span><br></pre></td></tr></table></figure>

<h2 id="Project-Structure"><a href="#Project-Structure" class="headerlink" title="Project Structure"></a>Project Structure</h2><h3 id="Core-Files-and-Their-Responsibilities"><a href="#Core-Files-and-Their-Responsibilities" class="headerlink" title="Core Files and Their Responsibilities"></a>Core Files and Their Responsibilities</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ConsoleApp2/</span><br><span class="line">├── PythonGame.cs              # Application entry point</span><br><span class="line">└── PythonGame/</span><br><span class="line">    ├── SnakeGame.cs           # Menu system and game state management</span><br><span class="line">    ├── SnakeGameBoard.cs      # Main game loop and board logic</span><br><span class="line">    ├── Snake.cs               # Snake entity with movement and collision</span><br><span class="line">    ├── Food.cs                # Food entity with expiration mechanics</span><br><span class="line">    ├── Direction.cs           # Direction enumeration</span><br><span class="line">    ├── DirctionExtension.cs   # Direction utility methods</span><br><span class="line">    ├── Level.cs               # Difficulty level enumeration</span><br><span class="line">    ├── GameRule.cs            # Game configuration structure</span><br><span class="line">    ├── GameRules.cs           # Predefined rule configurations</span><br><span class="line">    ├── CellType.cs            # Board cell type enumeration</span><br><span class="line">    └── Ultils.cs              # Utility functions</span><br></pre></td></tr></table></figure>

<p>This architecture keeps the board as the central coordinator while entities handle their own internal logic and rendering.</p>
<h2 id="Core-Entity-Design-and-Implementation"><a href="#Core-Entity-Design-and-Implementation" class="headerlink" title="Core Entity Design and Implementation"></a>Core Entity Design and Implementation</h2><h3 id="1-Snake-Entity-The-Heart-of-the-Game"><a href="#1-Snake-Entity-The-Heart-of-the-Game" class="headerlink" title="1. Snake Entity - The Heart of the Game"></a>1. Snake Entity - The Heart of the Game</h3><p>Let me start with the most complex entity - the Snake class. Here’s how I structured it:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Snake</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">set</span>; <span class="keyword">get</span>; &#125;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;(<span class="built_in">int</span> x, <span class="built_in">int</span> y)&gt; body;</span><br><span class="line">    <span class="keyword">public</span> IEnumerable&lt;(<span class="built_in">int</span> x, <span class="built_in">int</span> y)&gt; Body =&gt; body;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> ConsoleColor colorHead;</span><br><span class="line">    <span class="keyword">private</span> ConsoleColor colorBody;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> IsDead &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> width, height;</span><br><span class="line">    <span class="keyword">private</span> Direction dir;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Direction Dir</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">value</span> != dir.Opposite())</span><br><span class="line">                dir = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Key Design Decisions:</strong></p>
<ol>
<li><p><strong>LinkedList for Body</strong>: I chose <code>LinkedList&lt;(int x, int y)&gt;</code> because:</p>
<ul>
<li>O(1) insertion at head (AddFirst)</li>
<li>O(1) removal at tail (RemoveLast)</li>
<li>Perfect for snake movement where you add head and remove tail</li>
</ul>
</li>
<li><p><strong>Immutable Body Access</strong>: The <code>Body</code> property exposes <code>IEnumerable</code> to prevent external modification while allowing collision detection.</p>
</li>
<li><p><strong>Direction Validation</strong>: The <code>Dir</code> setter prevents 180-degree turns that would cause instant death.</p>
</li>
</ol>
<p><strong>Core Methods Implementation:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MoveAndDraw</span>(<span class="params"><span class="built_in">bool</span> eat</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    (<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = GetNextHead();</span><br><span class="line">    <span class="keyword">if</span> (!eat)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Remove tail visually and from data structure</span></span><br><span class="line">        (<span class="built_in">int</span> tx, <span class="built_in">int</span> ty) = body.Last.Value;</span><br><span class="line">        Console.SetCursorPosition(tx, ty);</span><br><span class="line">        Console.Write(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        body.RemoveLast();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Redraw new tail</span></span><br><span class="line">        (<span class="built_in">int</span> ntx, <span class="built_in">int</span> nty) = body.Last.Value;</span><br><span class="line">        Console.SetCursorPosition(ntx, nty);</span><br><span class="line">        PrintTail();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Convert old head to body segment</span></span><br><span class="line">    (<span class="built_in">int</span> hx, <span class="built_in">int</span> hy) = body.First.Value;</span><br><span class="line">    Console.SetCursorPosition(hx, hy);</span><br><span class="line">    PrintBody();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Draw new head</span></span><br><span class="line">    Console.SetCursorPosition(nx, ny);</span><br><span class="line">    PrintHead();</span><br><span class="line">    body.AddFirst((nx, ny));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This method handles both movement logic and rendering in one atomic operation, ensuring the visual state always matches the data state.</p>
<h3 id="2-Food-Entity-Time-Based-Mechanics"><a href="#2-Food-Entity-Time-Based-Mechanics" class="headerlink" title="2. Food Entity - Time-Based Mechanics"></a>2. Food Entity - Time-Based Mechanics</h3><p>The Food class implements expiration mechanics:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Food</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> X &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Y &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Score &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime ExpiredTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> totalLifeSeconds;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> isExpired</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; DateTime.Now &gt; ExpiredTime;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayUpdateFood</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.SetCursorPosition(X, Y);</span><br><span class="line">        <span class="keyword">if</span> (!isExpired)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.ForegroundColor = ConsoleColor.Magenta;</span><br><span class="line">            Console.Write(<span class="string">&quot;██&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Implementation Logic:</strong></p>
<ul>
<li>Each food has a <code>DateTime</code> expiration</li>
<li>The <code>isExpired</code> property checks real-time status</li>
<li><code>DisplayUpdateFood()</code> handles both drawing and cleanup</li>
</ul>
<h3 id="3-Direction-System-Type-Safe-Movement"><a href="#3-Direction-System-Type-Safe-Movement" class="headerlink" title="3. Direction System - Type-Safe Movement"></a>3. Direction System - Type-Safe Movement</h3><p>I implemented direction handling using enums with extension methods:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Direction</span><br><span class="line">&#123;</span><br><span class="line">    Up = <span class="number">0</span>, Right = <span class="number">1</span>, Down = <span class="number">2</span>, Left = <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DirectionExtensions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Direction <span class="title">Opposite</span>(<span class="params"><span class="keyword">this</span> Direction dir</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> dir <span class="keyword">switch</span></span><br><span class="line">        &#123;</span><br><span class="line">            Direction.Up =&gt; Direction.Down,</span><br><span class="line">            Direction.Down =&gt; Direction.Up,</span><br><span class="line">            Direction.Right =&gt; Direction.Left,</span><br><span class="line">            Direction.Left =&gt; Direction.Right,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="title">readonly</span> (<span class="params"><span class="built_in">int</span> dx, <span class="built_in">int</span> dy</span>)[] dirs</span> = &#123;</span><br><span class="line">        (<span class="number">0</span>, <span class="number">-1</span>),   <span class="comment">// Up</span></span><br><span class="line">        (<span class="number">2</span>, <span class="number">0</span>),    <span class="comment">// Right (2 units for double-width characters)</span></span><br><span class="line">        (<span class="number">0</span>, <span class="number">1</span>),    <span class="comment">// Down</span></span><br><span class="line">        (<span class="number">-2</span>, <span class="number">0</span>)    <span class="comment">// Left</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> (<span class="params"><span class="built_in">int</span> dx, <span class="built_in">int</span> dy</span>) <span class="title">ToOffset</span>(<span class="params"><span class="keyword">this</span> Direction dir</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> dirs[(<span class="built_in">int</span>)dir];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Why This Design:</strong></p>
<ul>
<li>Extension methods keep direction logic with direction types</li>
<li>Pre-computed offsets avoid runtime calculations</li>
<li>Double-width (2 units) for horizontal movement because console characters are “██” on my console screen</li>
</ul>
<h2 id="SnakeGameBoard-The-Game-Engine"><a href="#SnakeGameBoard-The-Game-Engine" class="headerlink" title="SnakeGameBoard - The Game Engine"></a>SnakeGameBoard - The Game Engine</h2><p>This is where everything comes together. Let me break down how the board coordinates all entities:</p>
<h3 id="Board-Structure-and-State-Management"><a href="#Board-Structure-and-State-Management" class="headerlink" title="Board Structure and State Management"></a>Board Structure and State Management</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">SnakeGameBoard</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> winWidth, winHeight;</span><br><span class="line">    <span class="keyword">private</span> CellType[,] vis;  <span class="comment">// Visibility/occupancy grid</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Snake snake1;</span><br><span class="line">    <span class="keyword">private</span> Snake? snake2;    <span class="comment">// Nullable for single-player mode</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Food&gt; foods;</span><br><span class="line">    <span class="keyword">private</span> GameRule rule;    <span class="comment">// Configuration object</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Random r;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Color schemes for different elements</span></span><br><span class="line">    ConsoleColor snake1Color = ConsoleColor.Green;</span><br><span class="line">    ConsoleColor snake2Color = ConsoleColor.Cyan;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>The <code>vis</code> Array - Core State Tracking:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> CellType</span><br><span class="line">&#123;</span><br><span class="line">    Empty = <span class="number">0</span>,</span><br><span class="line">    Snake1 = <span class="number">1</span>,</span><br><span class="line">    Snake2 = <span class="number">2</span>,</span><br><span class="line">    Food = <span class="number">3</span>, </span><br><span class="line">    Obstacle = <span class="number">5</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This 2D array tracks what occupies each console position. It’s the single source of truth for collision detection.</p>
<h3 id="Board-Initialization-Logic"><a href="#Board-Initialization-Logic" class="headerlink" title="Board Initialization Logic"></a>Board Initialization Logic</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SnakeGameBoard</span>(<span class="params">GameRule rule, <span class="built_in">string</span> player1, <span class="built_in">string</span> player2</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Ensure even width for character alignment</span></span><br><span class="line">    winWidth = (Console.WindowWidth &amp; <span class="number">1</span>) == <span class="number">1</span> ? Console.WindowWidth - <span class="number">1</span> : Console.WindowWidth;</span><br><span class="line">    winHeight = Console.WindowHeight;</span><br><span class="line">    </span><br><span class="line">    vis = <span class="keyword">new</span> CellType[winWidth, winHeight];</span><br><span class="line">    snake1 = <span class="keyword">new</span> Snake(winWidth, winHeight, player1, snake1Color, snake1BodyColor, initialLength);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (rule.Player == <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Keep generating snake2 until no overlap with snake1</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            snake2 = <span class="keyword">new</span> Snake(winWidth, winHeight, player2, snake2Color, snake2BodyColor, initialLength);</span><br><span class="line">            <span class="built_in">bool</span> overlap = snake2.Body.Any(seg =&gt; snake1.Body.Contains(seg));</span><br><span class="line">            <span class="keyword">if</span> (!overlap) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    foods = <span class="keyword">new</span> List&lt;Food&gt;(rule.FoodCount);</span><br><span class="line">    <span class="keyword">this</span>.rule = rule;</span><br><span class="line">    initVis();  <span class="comment">// Populate vis array with initial state</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Key Implementation Details:</strong></p>
<ol>
<li><strong>Even Width</strong>: <code>(Console.WindowWidth &amp; 1) == 1</code> checks if width is odd, then subtracts 1</li>
<li><strong>Collision Avoidance</strong>: Uses LINQ to check if any snake2 segment overlaps with snake1</li>
<li><strong>Configuration-Driven</strong>: Everything comes from the <code>GameRule</code> object</li>
</ol>
<h3 id="The-Game-Loop-Heart-of-the-Engine"><a href="#The-Game-Loop-Heart-of-the-Engine" class="headerlink" title="The Game Loop - Heart of the Engine"></a>The Game Loop - Heart of the Engine</h3><p>Here’s how the main game loop coordinates everything:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startGame</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Initial rendering</span></span><br><span class="line">    snake1.Draw();</span><br><span class="line">    <span class="keyword">if</span> (snake2 != <span class="literal">null</span>) snake2.Draw();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Generate initial food</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; rule.FoodCount; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        GenerateFood();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (running)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1. Input Collection Phase</span></span><br><span class="line">        Direction? dir1 = <span class="literal">null</span>, dir2 = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span> (Console.KeyAvailable)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> key = Console.ReadKey(<span class="literal">true</span>).Key;</span><br><span class="line">            <span class="keyword">switch</span> (key)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.UpArrow: snake1.Dir = Direction.Up; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.DownArrow: snake1.Dir = Direction.Down; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.LeftArrow: snake1.Dir = Direction.Left; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.RightArrow: snake1.Dir = Direction.Right; <span class="keyword">break</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.W: dir2 = Direction.Up; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.S: dir2 = Direction.Down; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.A: dir2 = Direction.Left; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.D: dir2 = Direction.Right; <span class="keyword">break</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.Escape: running = <span class="literal">false</span>; <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> ConsoleKey.Spacebar: running = Pause(); <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. Collision Detection Phase</span></span><br><span class="line">        (<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = snake1.GetNextHead();</span><br><span class="line">        <span class="built_in">bool</span> eat1 = vis[nx, ny] == CellType.Food || vis[nx + <span class="number">1</span>, ny] == CellType.Food;</span><br><span class="line">        snake1.IsDead = checkDeath(vis[nx, ny]);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (snake2 != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            (<span class="built_in">int</span> nx2, <span class="built_in">int</span> ny2) = snake2.GetNextHead();</span><br><span class="line">            <span class="built_in">bool</span> eat2 = vis[nx2, ny2] == CellType.Food || vis[nx2 + <span class="number">1</span>, ny2] == CellType.Food;</span><br><span class="line">            snake2.IsDead = checkDeath(vis[nx2, ny2]);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Head-on collision check</span></span><br><span class="line">            <span class="keyword">if</span> (nx2 == nx &amp;&amp; ny2 == ny)</span><br><span class="line">            &#123;</span><br><span class="line">                snake1.IsDead = <span class="literal">true</span>;</span><br><span class="line">                snake2.IsDead = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. Movement Phase</span></span><br><span class="line">        move(snake1, eat1, CellType.Snake1);</span><br><span class="line">        <span class="keyword">if</span> (snake2 != <span class="literal">null</span>)</span><br><span class="line">            move(snake2, eat2, CellType.Snake2);</span><br><span class="line">            </span><br><span class="line">        <span class="comment">// 4. Update Phase</span></span><br><span class="line">        updateFoodStatus();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5. Timing Control</span></span><br><span class="line">        Thread.Sleep(rule.Speed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Board-Entity-Interaction-Methods"><a href="#Board-Entity-Interaction-Methods" class="headerlink" title="Board-Entity Interaction Methods"></a>Board-Entity Interaction Methods</h3><p><strong>The <code>move()</code> Method - Core Game Logic:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move</span>(<span class="params">Snake snake, <span class="built_in">bool</span> eat, CellType cellType</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (snake.IsDead) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    (<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = snake.GetNextHead();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update visibility grid</span></span><br><span class="line">    vis[nx, ny] = cellType;</span><br><span class="line">    vis[nx + <span class="number">1</span>, ny] = cellType;  <span class="comment">// Double-width character</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!eat)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Clear tail from visibility grid</span></span><br><span class="line">        (<span class="built_in">int</span> tx, <span class="built_in">int</span> ty) = snake.GetTail();</span><br><span class="line">        vis[tx, ty] = CellType.Empty;</span><br><span class="line">        vis[tx + <span class="number">1</span>, ty] = CellType.Empty;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Handle visual update and data structure update</span></span><br><span class="line">    snake.MoveAndDraw(eat);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (eat)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Remove consumed food and generate new one</span></span><br><span class="line">        RemoveFoodAt(nx, ny);</span><br><span class="line">        GenerateFood();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Collision Detection Logic:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">checkDeath</span>(<span class="params">CellType current</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> current == CellType.Snake1 || </span><br><span class="line">           current == CellType.Snake2 || </span><br><span class="line">           current == CellType.Obstacle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This method shows how the board uses the <code>vis</code> array to determine collisions.</p>
<h2 id="Configuration-System-GameRule-and-GameRules"><a href="#Configuration-System-GameRule-and-GameRules" class="headerlink" title="Configuration System - GameRule and GameRules"></a>Configuration System - GameRule and GameRules</h2><p>I implemented a configuration-driven system for game rules:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GameRule</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Level Mode &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Player &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Speed &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> FoodCount &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> FoodExpiration &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> (<span class="built_in">int</span> Min, <span class="built_in">int</span> Max) FoodLifetimeRange &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> HasObstacle &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> (<span class="built_in">int</span> Min, <span class="built_in">int</span> Max) ObstacleRange &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Predefined Configurations:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">GameRules</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Dictionary&lt;(<span class="built_in">int</span> Player, Level Mode), GameRule&gt; Rules = <span class="keyword">new</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        [(<span class="number">1</span>, Level.Easy)] = <span class="keyword">new</span> GameRule &#123; </span><br><span class="line">            Mode = Level.Easy, Speed = <span class="number">150</span>, </span><br><span class="line">            FoodLifetimeRange = (<span class="number">8</span>, <span class="number">9</span>), ObstacleRange = (<span class="number">1</span>, <span class="number">3</span>) </span><br><span class="line">        &#125;,</span><br><span class="line">        [(<span class="number">1</span>, Level.Hard)] = <span class="keyword">new</span> GameRule &#123; </span><br><span class="line">            Mode = Level.Hard, Speed = <span class="number">75</span>, </span><br><span class="line">            FoodLifetimeRange = (<span class="number">5</span>, <span class="number">6</span>), ObstacleRange = (<span class="number">4</span>, <span class="number">7</span>) </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// ... more configurations</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>How Board Uses Configuration:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">NewGame</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    GameRule rule = GameRules.Rules[(player, level)];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Apply user customizations</span></span><br><span class="line">    <span class="keyword">if</span> (obstacle == <span class="literal">false</span>)</span><br><span class="line">        rule.ObstacleRange = (<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    rule.FoodCount = foodOnField;</span><br><span class="line">    rule.Player = player;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!foodTimer)</span><br><span class="line">        rule.FoodLifetimeRange = ((<span class="built_in">int</span>)<span class="number">1e8</span>, (<span class="built_in">int</span>)<span class="number">1e8</span> + <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">    game = <span class="keyword">new</span> SnakeGameBoard(rule, <span class="string">&quot;Player1&quot;</span>, <span class="string">&quot;Player2&quot;</span>);</span><br><span class="line">    game.Run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Key-Technical-Implementation-Details"><a href="#Key-Technical-Implementation-Details" class="headerlink" title="Key Technical Implementation Details"></a>Key Technical Implementation Details</h2><h3 id="Console-Rendering-Optimization"><a href="#Console-Rendering-Optimization" class="headerlink" title="Console Rendering Optimization"></a>Console Rendering Optimization</h3><p><strong>Problem</strong>: Console rendering is slow and causes flickering.</p>
<p><strong>My Solution</strong>: Strategic cursor positioning and selective updates:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Only clear specific positions, never full screen during gameplay</span></span><br><span class="line">Console.SetCursorPosition(tx, ty);</span><br><span class="line">Console.Write(<span class="string">&quot;  &quot;</span>);  <span class="comment">// Clear only the tail position</span></span><br><span class="line"></span><br><span class="line">Console.SetCursorPosition(nx, ny);</span><br><span class="line">PrintHead();  <span class="comment">// Draw only the new head</span></span><br></pre></td></tr></table></figure>

<h3 id="Dual-Player-Input-Handling"><a href="#Dual-Player-Input-Handling" class="headerlink" title="Dual-Player Input Handling"></a>Dual-Player Input Handling</h3><p><strong>Problem</strong>: Need to handle simultaneous inputs from both players.</p>
<p><strong>My Solution</strong>: Frame-based input collection:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Collect ALL available inputs in current frame</span></span><br><span class="line"><span class="keyword">while</span> (Console.KeyAvailable)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> key = Console.ReadKey(<span class="literal">true</span>).Key;</span><br><span class="line">    <span class="comment">// Process immediately to avoid input lag</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Boundary-Wrapping-Implementation"><a href="#Boundary-Wrapping-Implementation" class="headerlink" title="Boundary Wrapping Implementation"></a>Boundary Wrapping Implementation</h3><p><strong>Problem</strong>: Handle snake movement across screen edges seamlessly.</p>
<p><strong>My Solution</strong>: Modulo arithmetic with proper negative handling:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> (<span class="built_in">int</span> x, <span class="built_in">int</span> y) GetNextHead()</span><br><span class="line">&#123;</span><br><span class="line">    (<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = dir.ToOffset();</span><br><span class="line">    <span class="keyword">return</span> ((body.First.Value.x + nx + width) % width, </span><br><span class="line">            (body.First.Value.y + ny + height) % height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The key is adding <code>width</code> and <code>height</code> before modulo to handle negative results correctly.</p>
<h3 id="Food-System-Implementation"><a href="#Food-System-Implementation" class="headerlink" title="Food System Implementation"></a>Food System Implementation</h3><p>The food system manages lifecycle, expiration, and regeneration:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GenerateFood</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> foodX, foodY;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Find empty position</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        foodX = Ultils.NextEven(<span class="number">0</span>, winWidth - <span class="number">1</span>);  <span class="comment">// Even positions for alignment</span></span><br><span class="line">        foodY = r.Next(<span class="number">0</span>, winHeight - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">while</span> (vis[foodX, foodY] != CellType.Empty);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Create food with random lifetime</span></span><br><span class="line">    Food food = <span class="keyword">new</span> Food(foodX, foodY, </span><br><span class="line">        r.Next(rule.FoodLifetimeRange.Min, rule.FoodLifetimeRange.Max + <span class="number">1</span>), <span class="number">1</span>);</span><br><span class="line">    foods.Add(food);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update visibility grid and render</span></span><br><span class="line">    vis[foodX, foodY] = CellType.Food;</span><br><span class="line">    vis[foodX + <span class="number">1</span>, foodY] = CellType.Food;  <span class="comment">// Double-width</span></span><br><span class="line">    food.DisplayUpdateFood();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Food Expiration Management:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFoodStatus</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> removedCount = foods.RemoveAll(f =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (f.isExpired)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// Clear from visibility grid</span></span><br><span class="line">            vis[f.X, f.Y] = CellType.Empty;</span><br><span class="line">            vis[f.X + <span class="number">1</span>, f.Y] = CellType.Empty;</span><br><span class="line">            f.DisplayUpdateFood();  <span class="comment">// Visual cleanup</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Maintain food count</span></span><br><span class="line">    <span class="keyword">while</span> (foods.Count &lt; rule.FoodCount)</span><br><span class="line">    &#123;</span><br><span class="line">        GenerateFood();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Real-Time Expiration Check:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">bool</span> isExpired</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">get</span> =&gt; DateTime.Now &gt; ExpiredTime;  <span class="comment">// Real-time check each frame</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Obstacle-Generation-System"><a href="#Obstacle-Generation-System" class="headerlink" title="Obstacle Generation System"></a>Obstacle Generation System</h3><p>Obstacles are generated once at game start and remain static:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initObstacles</span>()</span></span><br><span class="line">&#123;        </span><br><span class="line">    Console.ForegroundColor = ConsoleColor.Black;</span><br><span class="line">    <span class="built_in">int</span> obstacleCnt = r.Next(rule.ObstacleRange.Min, rule.ObstacleRange.Max);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; obstacleCnt; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        GenerateObstacle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">GenerateObstacle</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> x, y;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        x = Ultils.NextEven(<span class="number">0</span>, winWidth - <span class="number">1</span>);</span><br><span class="line">        y = r.Next(<span class="number">0</span>, winHeight - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">while</span> (vis[x, y] != CellType.Empty);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update visibility grid and render</span></span><br><span class="line">    vis[x, y] = CellType.Obstacle;</span><br><span class="line">    vis[x + <span class="number">1</span>, y] = CellType.Obstacle;</span><br><span class="line">    </span><br><span class="line">    Console.SetCursorPosition(x, y);</span><br><span class="line">    Console.Write(<span class="string">&quot;██&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Collision-Detection-System"><a href="#Collision-Detection-System" class="headerlink" title="Collision Detection System"></a>Collision Detection System</h3><p>The collision system uses the <code>vis</code> array as the single source of truth:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Pre-movement collision check</span></span><br><span class="line">(<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = snake1.GetNextHead();</span><br><span class="line"><span class="built_in">bool</span> eat1 = vis[nx, ny] == CellType.Food || vis[nx + <span class="number">1</span>, ny] == CellType.Food;</span><br><span class="line">snake1.IsDead = checkDeath(vis[nx, ny]);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">checkDeath</span>(<span class="params">CellType current</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> current == CellType.Snake1 || </span><br><span class="line">           current == CellType.Snake2 || </span><br><span class="line">           current == CellType.Obstacle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Head-on Collision Detection:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (snake2 != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    (<span class="built_in">int</span> nx2, <span class="built_in">int</span> ny2) = snake2.GetNextHead();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Check if both snakes move to same position</span></span><br><span class="line">    <span class="keyword">if</span> (nx2 == nx &amp;&amp; ny2 == ny)</span><br><span class="line">    &#123;</span><br><span class="line">        snake1.IsDead = <span class="literal">true</span>;</span><br><span class="line">        snake2.IsDead = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Collision Types:</strong></p>
<ol>
<li><strong>Self-Collision</strong>: Snake hits its own body (CellType.Snake1&#x2F;Snake2)</li>
<li><strong>Cross-Collision</strong>: Snake hits other snake’s body</li>
<li><strong>Obstacle Collision</strong>: Snake hits static obstacle</li>
<li><strong>Head-on Collision</strong>: Both snakes move to same position simultaneously</li>
</ol>
<h3 id="Win-Loss-Determination-Logic"><a href="#Win-Loss-Determination-Logic" class="headerlink" title="Win&#x2F;Loss Determination Logic"></a>Win&#x2F;Loss Determination Logic</h3><p>The game determines winners through multiple scenarios:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">judgeWinner</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (snake2 == <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Single player - show final score</span></span><br><span class="line">        <span class="built_in">string</span> score = <span class="string">&quot;Score: &quot;</span> + snake1.Len.ToString();</span><br><span class="line">        Console.SetCursorPosition((Console.WindowWidth - score.Length) / <span class="number">2</span>, Console.WindowHeight / <span class="number">2</span> - <span class="number">1</span>);</span><br><span class="line">        Console.Write(score);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Snake? winner = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">string</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (snake1.IsDead &amp;&amp; snake2.IsDead)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Both died - compare lengths</span></span><br><span class="line">        <span class="keyword">if</span> (snake1.Len == snake2.Len)</span><br><span class="line">        &#123;</span><br><span class="line">            result = <span class="string">&quot;Tie Game&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            winner = snake1.Len &gt; snake2.Len ? snake1 : snake2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (snake1.IsDead)</span><br><span class="line">        winner = snake2;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        winner = snake1;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (winner != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        result = winner.Name + <span class="string">&quot; Wins!!!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Display results with scores</span></span><br><span class="line">    Console.SetCursorPosition((Console.WindowWidth - result.Length) / <span class="number">2</span>, Console.WindowHeight / <span class="number">2</span> - <span class="number">2</span>);</span><br><span class="line">    Console.Write(result);</span><br><span class="line">    Console.Write(<span class="string">$&quot;<span class="subst">&#123;snake1.Name&#125;</span>:\t<span class="subst">&#123;snake1.Len&#125;</span>&quot;</span>);</span><br><span class="line">    Console.Write(<span class="string">$&quot;<span class="subst">&#123;snake2.Name&#125;</span>:\t<span class="subst">&#123;snake2.Len&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Victory Conditions:</strong></p>
<ol>
<li><strong>Opponent Dies First</strong>: Surviving player wins</li>
<li><strong>Mutual Death</strong>: Player with longer snake wins</li>
<li><strong>Equal Length</strong>: Tie game declared</li>
</ol>
<h3 id="Dual-Player-Combat-System"><a href="#Dual-Player-Combat-System" class="headerlink" title="Dual-Player Combat System"></a>Dual-Player Combat System</h3><p>The dual-player system handles simultaneous movement and interaction:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Separate input handling for each player</span></span><br><span class="line">Direction? dir1 = <span class="literal">null</span>, dir2 = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">while</span> (Console.KeyAvailable)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> key = Console.ReadKey(<span class="literal">true</span>).Key;</span><br><span class="line">    <span class="keyword">switch</span> (key)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Player 1 controls (Arrow keys)</span></span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.UpArrow: snake1.Dir = Direction.Up; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.DownArrow: snake1.Dir = Direction.Down; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.LeftArrow: snake1.Dir = Direction.Left; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.RightArrow: snake1.Dir = Direction.Right; <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Player 2 controls (WASD)</span></span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.W: dir2 = Direction.Up; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.S: dir2 = Direction.Down; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.A: dir2 = Direction.Left; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.D: dir2 = Direction.Right; <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Shared controls</span></span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.Escape: running = <span class="literal">false</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ConsoleKey.Spacebar: running = Pause(); <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Dual-Player Collision Matrix:</strong></p>
<table>
<thead>
<tr>
<th>Snake1 vs</th>
<th>Empty</th>
<th>Food</th>
<th>Snake1</th>
<th>Snake2</th>
<th>Obstacle</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Move</strong></td>
<td>✓</td>
<td>Eat</td>
<td>Die</td>
<td>Die</td>
<td>Die</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Snake2 vs</th>
<th>Empty</th>
<th>Food</th>
<th>Snake1</th>
<th>Snake2</th>
<th>Obstacle</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Move</strong></td>
<td>✓</td>
<td>Eat</td>
<td>Die</td>
<td>Die</td>
<td>Die</td>
</tr>
</tbody></table>
<p><strong>Simultaneous Movement Resolution:</strong></p>
<ol>
<li><strong>Input Collection</strong>: Both players’ inputs processed in same frame</li>
<li><strong>Position Calculation</strong>: Next positions calculated for both snakes</li>
<li><strong>Collision Detection</strong>: Check each snake against current game state</li>
<li><strong>Head-on Detection</strong>: Special check if both move to same position</li>
<li><strong>Atomic Movement</strong>: Both snakes move simultaneously</li>
<li><strong>State Update</strong>: Visibility grid and visuals updated together</li>
</ol>
<h3 id="State-Synchronization"><a href="#State-Synchronization" class="headerlink" title="State Synchronization"></a>State Synchronization</h3><p>The game maintains consistency between three layers:</p>
<ol>
<li><strong>Data Layer</strong>: <code>LinkedList&lt;(int x, int y)&gt;</code> for snake bodies</li>
<li><strong>State Layer</strong>: <code>CellType[,] vis</code> for collision detection</li>
<li><strong>Visual Layer</strong>: Console output for rendering</li>
</ol>
<p><strong>Synchronization in Movement:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move</span>(<span class="params">Snake snake, <span class="built_in">bool</span> eat, CellType type</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    (<span class="built_in">int</span> nx, <span class="built_in">int</span> ny) = snake.GetNextHead();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update state layer (vis array)</span></span><br><span class="line">    vis[nx, ny] = type;</span><br><span class="line">    vis[nx + <span class="number">1</span>, ny] = type;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!eat)</span><br><span class="line">    &#123;</span><br><span class="line">        (<span class="built_in">int</span> tx, <span class="built_in">int</span> ty) = snake.GetTail();</span><br><span class="line">        vis[tx, ty] = CellType.Empty;</span><br><span class="line">        vis[tx + <span class="number">1</span>, ty] = CellType.Empty;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Update data and visual layers</span></span><br><span class="line">    snake.MoveAndDraw(eat);  <span class="comment">// Handles LinkedList + Console output</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (eat)</span><br><span class="line">    &#123;</span><br><span class="line">        foods.RemoveAll(f =&gt; f.X == nx &amp;&amp; f.Y == ny);</span><br><span class="line">        GenerateFood();</span><br><span class="line">        drawBottomMenu();  <span class="comment">// Update score display</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This ensures all three layers stay synchronized throughout the game.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Building this Snake game taught me valuable lessons about:</p>
<ul>
<li><strong>Entity-Component interaction</strong>: How to keep entities focused while enabling coordination</li>
<li><strong>Console game optimization</strong>: Minimizing rendering calls for smooth gameplay</li>
<li><strong>Configuration-driven design</strong>: Making systems flexible through external configuration</li>
<li><strong>Data structure selection</strong>: Choosing the right structure (LinkedList) for the job</li>
<li><strong>State synchronization</strong>: Keeping visual state and data state consistent</li>
<li><strong>Real-time systems</strong>: Frame-based processing for responsive multiplayer gameplay</li>
<li><strong>Collision detection</strong>: Using unified state arrays for efficient collision checking</li>
</ul>
<p>The key insight was treating the console as a graphics buffer and the <code>vis</code> array as the authoritative game state, with entities responsible for their own behavior but coordinated through the central board.</p>
<h2 id="Core-Components-Deep-Dive"><a href="#Core-Components-Deep-Dive" class="headerlink" title="Core Components Deep Dive"></a>Core Components Deep Dive</h2><h3 id="1-Menu-System-SnakeGame-cs"><a href="#1-Menu-System-SnakeGame-cs" class="headerlink" title="1. Menu System (SnakeGame.cs)"></a>1. Menu System (<code>SnakeGame.cs</code>)</h3><p>The menu system demonstrates sophisticated state management and user interface design:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SnakeGame</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> player;</span><br><span class="line">    <span class="built_in">int</span> currentMenu;</span><br><span class="line">    Level level;</span><br><span class="line">    <span class="built_in">bool</span> obstacle;</span><br><span class="line">    <span class="built_in">bool</span> foodTimer;</span><br><span class="line">    <span class="built_in">int</span> foodOnField;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">string</span>[] menu = <span class="keyword">new</span> <span class="built_in">string</span>[]&#123;</span><br><span class="line">        <span class="string">&quot;Start New Game&quot;</span>,</span><br><span class="line">        <span class="string">&quot;  Players: &quot;</span>,</span><br><span class="line">        <span class="string">&quot;  Difficulty: &quot;</span>,</span><br><span class="line">        <span class="string">&quot;  Obstacles: &quot;</span>,</span><br><span class="line">        <span class="string">&quot;  Food Timer: &quot;</span>,</span><br><span class="line">        <span class="string">&quot;  Food on Field: &quot;</span>,</span><br><span class="line">        <span class="string">&quot;View History / Rankings&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Key Implementation Details:</strong></p>
<ol>
<li><strong>State Management</strong>: The menu maintains current selection (<code>currentMenu</code>) and game configuration state</li>
<li><strong>Circular Navigation</strong>: Uses modulo arithmetic for wrap-around menu navigation</li>
<li><strong>Dynamic Options</strong>: Settings change in real-time with visual feedback</li>
<li><strong>Input Handling</strong>: Comprehensive keyboard input processing with arrow keys and confirmation</li>
</ol>
<p><strong>Navigation Logic:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (key == ConsoleKey.UpArrow)</span><br><span class="line">&#123;</span><br><span class="line">    currentMenu = (currentMenu - <span class="number">1</span> + menu.Length) % menu.Length;</span><br><span class="line">    displayMenu();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (key == ConsoleKey.DownArrow)</span><br><span class="line">&#123;</span><br><span class="line">    currentMenu = (currentMenu + <span class="number">1</span>) % menu.Length;</span><br><span class="line">    displayMenu();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This demonstrates elegant circular navigation that prevents index out-of-bounds errors.</p>
<h3 id="2-Game-Board-Engine-SnakeGameBoard-cs"><a href="#2-Game-Board-Engine-SnakeGameBoard-cs" class="headerlink" title="2. Game Board Engine (SnakeGameBoard.cs)"></a>2. Game Board Engine (<code>SnakeGameBoard.cs</code>)</h3><p>The game board serves as the main game engine, coordinating all game entities and managing the core game loop:</p>
<p><strong>Initialization Strategy:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SnakeGameBoard</span>(<span class="params">GameRule rule, <span class="built_in">string</span> player1, <span class="built_in">string</span> player2</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    winWidth = (Console.WindowWidth &amp; <span class="number">1</span>) == <span class="number">1</span> ? Console.WindowWidth - <span class="number">1</span> : Console.WindowWidth;</span><br><span class="line">    winHeight = Console.WindowHeight;</span><br><span class="line">    </span><br><span class="line">    vis = <span class="keyword">new</span> CellType[winWidth, winHeight];</span><br><span class="line">    snake1 = <span class="keyword">new</span> Snake(winWidth, winHeight, player1, snake1Color, snake1BodyColor, initialLength);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (rule.Player == <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            snake2 = <span class="keyword">new</span> Snake(winWidth, winHeight, player2, snake2Color, snake2BodyColor, initialLength);</span><br><span class="line">            <span class="built_in">bool</span> overlap = snake2.Body.Any(seg =&gt; snake1.Body.Contains(seg));</span><br><span class="line">            <span class="keyword">if</span> (!overlap) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Critical Design Decisions:</strong></p>
<ol>
<li><strong>Even Width Enforcement</strong>: Ensures proper character alignment for console rendering</li>
<li><strong>Collision Avoidance</strong>: Regenerates second player position until no overlap occurs</li>
<li><strong>Flexible Player Count</strong>: Conditionally creates second snake based on game rules</li>
<li><strong>Resource Management</strong>: Proper initialization of all game entities</li>
</ol>
<h3 id="3-Snake-Entity-Snake-cs"><a href="#3-Snake-Entity-Snake-cs" class="headerlink" title="3. Snake Entity (Snake.cs)"></a>3. Snake Entity (<code>Snake.cs</code>)</h3><p>The Snake class demonstrates advanced data structure usage and efficient rendering:</p>
<p><strong>Data Structure Choice:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> LinkedList&lt;(<span class="built_in">int</span> x, <span class="built_in">int</span> y)&gt; body;</span><br></pre></td></tr></table></figure>

<p><strong>Why LinkedList?</strong></p>
<ul>
<li><strong>O(1) Head Addition</strong>: Adding new head segment is constant time</li>
<li><strong>O(1) Tail Removal</strong>: Removing tail segment is constant time</li>
<li><strong>Memory Efficiency</strong>: No need to shift array elements during movement</li>
<li><strong>Natural Snake Representation</strong>: Linked structure mirrors snake’s segmented nature</li>
</ul>
<p><strong>Movement Algorithm:</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> (<span class="built_in">int</span> x, <span class="built_in">int</span> y) GetNextHead()</span><br><span class="line">&#123;</span><br><span class="line">    (<span class="built_in">int</span> x, <span class="built_in">int</span> y) head = GetCurrentHead;</span><br><span class="line">    (<span class="built_in">int</span> dx, <span class="built_in">int</span> dy) = dir.ToOffset();</span><br><span class="line">    <span class="built_in">int</span> newX = (head.x + dx + width) % width;</span><br><span class="line">    <span class="built_in">int</span> newY = (head.y + dy + height) % height;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (newX, newY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Boundary Wrapping Logic:</strong></p>
<ul>
<li>Uses modulo arithmetic for seamless world wrapping</li>
<li>Handles negative coordinates correctly with addition before modulo</li>
<li>Maintains continuous movement without boundary checks</li>
</ul>
<h3 id="4-Food-System-Food-cs"><a href="#4-Food-System-Food-cs" class="headerlink" title="4. Food System (Food.cs)"></a>4. Food System (<code>Food.cs</code>)</h3><p>The food system implements time-based mechanics with visual feedback:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Food</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> DateTime ExpiredTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> totalLifeSeconds;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> isExpired</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> =&gt; DateTime.Now &gt; ExpiredTime;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayUpdateFood</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.SetCursorPosition(X, Y);</span><br><span class="line">        <span class="keyword">if</span> (!isExpired)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.ForegroundColor = ConsoleColor.Magenta;</span><br><span class="line">            Console.Write(<span class="string">&quot;██&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time Management Strategy:</strong></p>
<ul>
<li>Uses <code>DateTime</code> for precise expiration tracking</li>
<li>Implements property-based expiration checking</li>
<li>Provides visual feedback for food state changes</li>
</ul>
<h2 id="Game-Mechanics-Implementation"><a href="#Game-Mechanics-Implementation" class="headerlink" title="Game Mechanics Implementation"></a>Game Mechanics Implementation</h2><h3 id="Direction-System"><a href="#Direction-System" class="headerlink" title="Direction System"></a>Direction System</h3><p>The direction system uses enums with extension methods for clean, type-safe direction handling:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Direction</span><br><span class="line">&#123;</span><br><span class="line">    Up = <span class="number">0</span>, Right = <span class="number">1</span>, Down = <span class="number">2</span>, Left = <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DirectionExtensions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Direction <span class="title">Opposite</span>(<span class="params"><span class="keyword">this</span> Direction dir</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> dir <span class="keyword">switch</span></span><br><span class="line">        &#123;</span><br><span class="line">            Direction.Up =&gt; Direction.Down,</span><br><span class="line">            Direction.Down =&gt; Direction.Up,</span><br><span class="line">            Direction.Right =&gt; Direction.Left,</span><br><span class="line">            Direction.Left =&gt; Direction.Right,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="title">readonly</span> (<span class="params"><span class="built_in">int</span> dx, <span class="built_in">int</span> dy</span>)[] dirs</span> = &#123;</span><br><span class="line">        (<span class="number">0</span>, <span class="number">-1</span>),   <span class="comment">// Up</span></span><br><span class="line">        (<span class="number">2</span>, <span class="number">0</span>),    <span class="comment">// Right (2 units for double-width characters)</span></span><br><span class="line">        (<span class="number">0</span>, <span class="number">1</span>),    <span class="comment">// Down</span></span><br><span class="line">        (<span class="number">-2</span>, <span class="number">0</span>)    <span class="comment">// Left</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Design Benefits:</strong></p>
<ul>
<li><strong>Type Safety</strong>: Enum prevents invalid direction values</li>
<li><strong>Extensibility</strong>: Easy to add new directions</li>
<li><strong>Performance</strong>: Pre-computed offset arrays avoid runtime calculations</li>
<li><strong>Readability</strong>: Extension methods provide intuitive API</li>
</ul>
<h3 id="Collision-Detection"><a href="#Collision-Detection" class="headerlink" title="Collision Detection"></a>Collision Detection</h3><p>The collision system uses a multi-layered approach:</p>
<ol>
<li><strong>Visibility Grid</strong>: 2D array tracks cell occupancy</li>
<li><strong>Entity Checking</strong>: Direct coordinate comparison for precision</li>
<li><strong>Boundary Wrapping</strong>: Modulo arithmetic for seamless world edges</li>
</ol>
<h3 id="Input-Collection-Strategy"><a href="#Input-Collection-Strategy" class="headerlink" title="Input Collection Strategy"></a>Input Collection Strategy</h3><p>The game uses frame-based input collection to handle multiple simultaneous inputs:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List&lt;ConsoleKey&gt; inputs = <span class="keyword">new</span> List&lt;ConsoleKey&gt;();</span><br><span class="line"><span class="keyword">while</span> (Console.KeyAvailable)</span><br><span class="line">&#123;</span><br><span class="line">    inputs.Add(Console.ReadKey(<span class="literal">true</span>).Key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> input <span class="keyword">in</span> inputs)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Process each input for respective players</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This approach ensures no input is lost during rapid key presses, crucial for dual-player gameplay.</p>
<h2 id="Advanced-Features"><a href="#Advanced-Features" class="headerlink" title="Advanced Features"></a>Advanced Features</h2><h3 id="1-Dual-Player-System"><a href="#1-Dual-Player-System" class="headerlink" title="1. Dual-Player System"></a>1. Dual-Player System</h3><p>The dual-player implementation demonstrates complex state management:</p>
<p><strong>Control Scheme Separation:</strong></p>
<ul>
<li>Player 1: Arrow keys (↑↓←→)</li>
<li>Player 2: WASD keys</li>
<li>Shared controls: Space (pause), Escape (exit)</li>
</ul>
<p><strong>Simultaneous Processing:</strong><br>Both snakes update in the same frame, ensuring fair gameplay and consistent timing.</p>
<h3 id="2-Dynamic-Difficulty-System"><a href="#2-Dynamic-Difficulty-System" class="headerlink" title="2. Dynamic Difficulty System"></a>2. Dynamic Difficulty System</h3><p>Difficulty affects multiple game parameters:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">enum</span> Level</span><br><span class="line">&#123;</span><br><span class="line">    Easy, Medium, Hard, Hell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Each level modifies:</p>
<ul>
<li>Snake movement speed</li>
<li>Food expiration time</li>
<li>Obstacle density</li>
<li>Score multipliers</li>
</ul>
<h3 id="3-Food-Expiration-Mechanics"><a href="#3-Food-Expiration-Mechanics" class="headerlink" title="3. Food Expiration Mechanics"></a>3. Food Expiration Mechanics</h3><p>The expiration system adds strategic depth:</p>
<p><strong>Implementation Details:</strong></p>
<ul>
<li>Foods spawn with random lifetimes</li>
<li>Visual countdown through color changes</li>
<li>Automatic cleanup of expired foods</li>
<li>Score bonuses for quick consumption</li>
</ul>
<h3 id="4-Configurable-Game-Rules"><a href="#4-Configurable-Game-Rules" class="headerlink" title="4. Configurable Game Rules"></a>4. Configurable Game Rules</h3><p>The <code>GameRule</code> class enables flexible game configuration:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GameRule</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Level Mode &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Player &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Speed &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> FoodCount &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> FoodExpiration &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> (<span class="built_in">int</span> Min, <span class="built_in">int</span> Max) FoodLifetimeRange &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> HasObstacle &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> (<span class="built_in">int</span> Min, <span class="built_in">int</span> Max) ObstacleRange &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This allows for easy customization and future feature additions.</p>
<h2 id="Technical-Challenges-and-Solutions"><a href="#Technical-Challenges-and-Solutions" class="headerlink" title="Technical Challenges and Solutions"></a>Technical Challenges and Solutions</h2><h3 id="1-Console-Rendering-Optimization"><a href="#1-Console-Rendering-Optimization" class="headerlink" title="1. Console Rendering Optimization"></a>1. Console Rendering Optimization</h3><p><strong>Challenge</strong>: Console rendering is inherently slow and can cause flickering.</p>
<p><strong>Solution</strong>: </p>
<ul>
<li>Minimal screen updates using <code>Console.SetCursorPosition()</code></li>
<li>Only redraw changed elements</li>
<li>Double-buffering simulation through strategic clearing</li>
</ul>
<h3 id="2-Timing-and-Synchronization"><a href="#2-Timing-and-Synchronization" class="headerlink" title="2. Timing and Synchronization"></a>2. Timing and Synchronization</h3><p><strong>Challenge</strong>: Maintaining consistent frame rates across different difficulty levels.</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Thread.Sleep() with difficulty-based intervals</li>
<li>Input collection before each frame</li>
<li>Separate rendering and logic phases</li>
</ul>
<h3 id="3-Memory-Management"><a href="#3-Memory-Management" class="headerlink" title="3. Memory Management"></a>3. Memory Management</h3><p><strong>Challenge</strong>: Frequent allocation&#x2F;deallocation during gameplay.</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Object pooling for food entities</li>
<li>LinkedList for efficient snake body management</li>
<li>Reused data structures where possible</li>
</ul>
<h3 id="4-Boundary-Handling"><a href="#4-Boundary-Handling" class="headerlink" title="4. Boundary Handling"></a>4. Boundary Handling</h3><p><strong>Challenge</strong>: Managing snake movement across screen boundaries.</p>
<p><strong>Solution</strong>:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> newX = (head.x + dx + width) % width;</span><br><span class="line"><span class="built_in">int</span> newY = (head.y + dy + height) % height;</span><br></pre></td></tr></table></figure>

<p>Modulo arithmetic with positive offset ensures correct wrapping behavior.</p>
<h2 id="Performance-Optimizations"><a href="#Performance-Optimizations" class="headerlink" title="Performance Optimizations"></a>Performance Optimizations</h2><h3 id="1-Rendering-Optimizations"><a href="#1-Rendering-Optimizations" class="headerlink" title="1. Rendering Optimizations"></a>1. Rendering Optimizations</h3><ul>
<li><strong>Selective Updates</strong>: Only redraw changed screen regions</li>
<li><strong>Color Management</strong>: Minimize color changes to reduce console overhead</li>
<li><strong>Cursor Positioning</strong>: Strategic cursor placement to minimize jumps</li>
</ul>
<h3 id="2-Data-Structure-Efficiency"><a href="#2-Data-Structure-Efficiency" class="headerlink" title="2. Data Structure Efficiency"></a>2. Data Structure Efficiency</h3><ul>
<li><strong>LinkedList for Snake</strong>: O(1) head&#x2F;tail operations</li>
<li><strong>HashSet for Collision</strong>: O(1) position lookup</li>
<li><strong>Array for Grid</strong>: Direct memory access for position checking</li>
</ul>
<h3 id="3-Input-Handling"><a href="#3-Input-Handling" class="headerlink" title="3. Input Handling"></a>3. Input Handling</h3><ul>
<li><strong>Key Buffering</strong>: Collect all available inputs per frame</li>
<li><strong>Input Validation</strong>: Filter invalid inputs early</li>
<li><strong>State Caching</strong>: Avoid repeated property access</li>
</ul>
<div id="copyright"> <div id="fullCopyright"> <div id="postAuthor"> <span class="copyright-key">Author</span>: o_oyao</div><div id="postLink"><span class="copyright-key">Link</span>: <a href="/2025/08/23/Building-a-Feature-Rich-Console-Snake-Game-in-C/">http://dyingdown.github.io/2025/08/23/Building-a-Feature-Rich-Console-Snake-Game-in-C/</a></div><div id="postLicense"><span class="copyright-key">License</span>: All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</div></div></div></div></div><nav id="pagination"><div class="prev-post pull-left"><a id="prev" href="/2025/08/30/Use-Scrcpy-to-Control-Android-Phone-from-Computer/"><div class="img_fit imgL" style="background-color:#undefined"><img src="https://cdn.jsdelivr.net/gh/DyingDown/img-host-repo/202508301611259.png"></div><div class="info il"><div class="label" id="label-l">PREVIOUS POST</div><div>Use Scrcpy to Control Android Phone from Computer</div></div></a></div><div class="next-post pull-right"><a id="next" href="/2025/07/15/Understanding-Net-and-C-Project-Templates/"><div class="img_fit imgR" style="background-color:#undefined"><img src="https://cdn.jsdelivr.net/gh/DyingDown/img-host-repo/202507151608585.png"></div><div class="info ir"><div class="label" id="label-r">NEXT POST</div><div>Understanding .Net and C# Project Templates</div></div></a></div></nav><div id="vcomment"></div><script src="https://cdn.jsdelivr.net/gh/DyingDown/cdn@main/valine/dist/Valine.min.js"></script><script>var notify = 'true' == true ? true : false;
var verify = 'true' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'l3oy62Wr2irl9arSb6g7A2Tj-MdYXbMMI',
  appKey:'nTzjKIWYitgRpJ4AyX6i3Wyy',
  placeholder:'Leave your email address so you can get reply from me!',
  avatar:'mp',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'en',
  serverURLs: 'https://l3oy62wr.api.lncldglobal.com',
})</script><div id="sideButtons"><div id="back-to-top"><span>TOP</span></div><div id="go-to-comment"><span>COMMENT</span></div></div></div><div id="toc-col"><div class="side-user"><ul class="top-bar"><li class="me">ABOUT</li><li class="mid">|</li><li class="link">DONATE</li></ul><div class="clearfix" id="author-info"><?xml version="1.0" encoding="UTF-8"?>
<svg class="qrButton" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="70px" height="70px" viewBox="0 0 70 70" version="1.1">
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 0.664062 0.53125 C 0.664062 0.796875 1.664062 1.996094 2.929688 3.160156 L 5.15625 5.289062 L 13.007812 5.324219 C 18.632812 5.324219 20.925781 5.421875 21.226562 5.722656 C 21.527344 6.023438 21.625 8.316406 21.625 13.972656 L 21.660156 21.792969 L 23.789062 24.085938 C 24.953125 25.320312 26.015625 26.285156 26.183594 26.183594 C 26.316406 26.082031 26.417969 20.160156 26.351562 13.007812 L 26.285156 0 L 13.472656 0 C 2.097656 0 0.664062 0.0664062 0.664062 0.53125 Z M 0.664062 0.53125 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 32.207031 2.394531 C 32.140625 3.757812 32.238281 4.925781 32.4375 5.058594 C 32.636719 5.191406 33.601562 5.324219 34.601562 5.324219 C 35.597656 5.324219 36.597656 5.191406 36.761719 5.058594 C 36.964844 4.925781 37.0625 3.757812 36.996094 2.394531 L 36.863281 0 L 32.339844 0 Z M 32.207031 2.394531 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 42.917969 13.472656 L 42.917969 26.949219 L 69.867188 26.949219 L 69.867188 0 L 42.917969 0 Z M 64.476562 13.441406 C 64.542969 18.996094 64.445312 21.527344 64.179688 21.824219 C 63.644531 22.457031 48.605469 22.523438 47.976562 21.890625 C 47.410156 21.324219 47.410156 6.289062 47.976562 5.722656 C 48.273438 5.421875 50.4375 5.324219 56.394531 5.390625 L 64.378906 5.488281 Z M 64.476562 13.441406 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 52.867188 10.347656 C 52.667969 10.445312 52.601562 12.011719 52.632812 13.839844 L 52.734375 17.132812 L 59.652344 17.132812 L 59.652344 10.480469 L 56.425781 10.3125 C 54.628906 10.214844 53.03125 10.246094 52.867188 10.347656 Z M 52.867188 10.347656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 10.148438 10.246094 C 10.046875 10.378906 16.234375 16.636719 16.46875 16.636719 C 16.734375 16.636719 16.636719 10.3125 16.402344 10.3125 C 11.945312 10.179688 10.246094 10.179688 10.148438 10.246094 Z M 10.148438 10.246094 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 32.605469 11.609375 C 32.238281 11.84375 32.140625 12.410156 32.207031 13.941406 L 32.339844 16.003906 L 34.667969 15.902344 L 36.996094 15.804688 L 37.03125 13.742188 C 37.097656 11.945312 37.03125 11.644531 36.429688 11.511719 C 35.398438 11.210938 33.171875 11.3125 32.605469 11.609375 Z M 32.605469 11.609375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 32.207031 22.523438 C 32.140625 22.65625 32.171875 24.984375 32.273438 27.679688 L 32.4375 32.605469 L 34.933594 35.101562 L 37.394531 37.59375 L 39.757812 37.59375 C 41.15625 37.59375 42.285156 37.761719 42.519531 37.996094 C 42.75 38.226562 42.917969 39.359375 42.917969 40.789062 L 42.917969 43.183594 L 45.480469 45.714844 L 48.042969 48.242188 L 55.761719 48.242188 C 60.019531 48.242188 63.710938 48.339844 64.011719 48.441406 C 64.476562 48.605469 64.542969 49.671875 64.542969 56.691406 L 64.578125 64.710938 L 66.671875 66.9375 C 67.835938 68.203125 69.035156 69.203125 69.335938 69.203125 C 69.800781 69.203125 69.867188 68.003906 69.867188 56.394531 L 69.867188 43.582031 L 67.304688 43.582031 C 65.875 43.582031 64.511719 43.449219 64.246094 43.285156 C 63.945312 43.085938 63.777344 42.253906 63.746094 40.890625 C 63.644531 37.894531 63.976562 37.59375 67.273438 37.59375 L 69.867188 37.59375 L 69.867188 32.9375 L 64.476562 33.003906 L 59.054688 33.105469 L 59.152344 35 C 59.320312 37.894531 58.988281 38.261719 56.226562 38.261719 C 53.664062 38.261719 53.765625 38.160156 53.898438 40.65625 C 53.996094 43.183594 53.597656 43.582031 50.902344 43.582031 C 47.574219 43.582031 47.574219 43.582031 47.574219 40.753906 C 47.574219 39.160156 47.710938 38.195312 48.007812 38.027344 C 48.207031 37.894531 49.472656 37.695312 50.738281 37.59375 L 53.066406 37.429688 L 53.066406 33.105469 L 48.109375 33.003906 C 44.980469 32.9375 42.953125 32.769531 42.683594 32.539062 C 42.351562 32.273438 42.21875 31.507812 42.285156 30.109375 C 42.320312 28.976562 42.253906 27.914062 42.152344 27.714844 C 42.054688 27.546875 41.15625 27.449219 40.15625 27.546875 C 39.09375 27.613281 38.0625 27.515625 37.628906 27.28125 C 36.929688 26.914062 36.894531 26.683594 36.996094 24.6875 L 37.097656 22.457031 L 34.699219 22.355469 C 33.402344 22.289062 32.273438 22.390625 32.207031 22.523438 Z M 32.207031 22.523438 "/>
<path style=" stroke:none;fill-rule:nonzero;fill-opacity:1;" d="M 53.230469 53.363281 C 53.230469 53.53125 59.488281 59.886719 59.652344 59.886719 C 59.71875 59.886719 59.71875 58.421875 59.6875 56.625 L 59.652344 53.398438 L 56.425781 53.296875 C 54.664062 53.265625 53.230469 53.265625 53.230469 53.363281 Z M 53.230469 53.363281 "/>
</g>
</svg><div class="au-info"><img class="avatar" src="https://cdn.jsdelivr.net/gh/DyingDown/img-host-repo/202409161940288.png"><div id="side-author">o_oyao</div><div id="author-description">&nbsp;&nbsp;The Jigsaw puzzle is incomplete with even one missing piece. And I want to be the last piece to make the puzzle complete.</div></div><div id="payment-code"><div class="qr-description">Like my post?</div><img class="pay-code" src="/img/zelle.jpg" alt="Default QR Code"><div class="payButtons"><button class="paymentButtons " id="alipay">Alipay</button><button class="paymentButtons selected" id="zelle">Zelle®</button></div></div></div></div><div id="toc-outer"><div id="sidebar-toc"><div id="catalog"><span>Catalog</span></div><div id="tocs"></div></div></div></div></div><script>var desc = "&lt;p&gt;What started as a small classroom exercise—just moving a single player around the console to eat food—quickly grew into something bigger. The more I coded, the more fun it became, and before I knew it, I had expanded the idea into a full Snake game.&lt;/p&gt;";
var $config = {
    description         : desc,
    wechatQrcodeTitle   : "微信扫一扫：Share", // 微信二维码提示文字
    wechatQrcodeHelper  : '<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>',
};
//- socialShare('.social-share', $config);</script></div></div><div id="bottom-outer"><div id="bottom-inner"><div id="incons"><a class="icon" href=" mailto:o_oyao@outlook.com " title="E-mail"><i class=" fas fa-fw fa-envelope"></i></a></div><div id="incons"><a class="icon" href=" " title="Wechat"><i class="fa-brands fa-weixin"></i></a></div><div id="incons"><a class="icon" href=" " title="X-Twitter"><i class="fa-brands fa-twitter"></i></a></div><div id="incons"><a class="icon" href=" " title="QQ"><i class="fa-brands fa-qq"></i></a></div><div id="incons"><a class="icon" href=" " title="Pinterest"><i class="fa-brands fa-pinterest-p"></i></a></div><div id="incons"><a class="icon" href=" https://www.linkedin.com/in/yaogu0304/" title="Linkedin"><i class="fa-brands fa-linkedin-in"></i></a></div><div id="incons"><a class="icon" href=" https://github.com/DyingDown " title="GitHub"><i class="fa-brands fa-github"></i></a></div><div id="incons"><a class="icon" href=" " title="Facebook"><i class="fa-brands fa-facebook-f"></i></a></div><div id="incons"><a class="icon" href=" https://www.instagram.com/o_oyao0304/" title="Instagram"><i class="fa-brands fa-instagram"></i></a></div><div id="incons"><a class="icon" href=" " title="TikTok"><i class="fa-brands fa-tiktok"></i></a></div><div id="author"><a id="theme_name" target="_blank" rel="noopener" href="https://github.com/DyingDown/hexo-theme-last"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="900.000000pt" height="288.000000pt" viewBox="0 0 900.000000 288.000000" preserveAspectRatio="xMidYMid meet" id="last-icon">
<g transform="translate(0.000000,288.000000) scale(0.100000,-0.100000)" stroke="none">
<path class="blue a right" d="M3815 2435 c-45 -12 -134 -28 -220 -41 -16 -2 -64 -11 -105 -19 -41 -8 -96 -17 -122 -20 -45 -6 -48 -8 -48 -34 0 -16 13 -59 29 -97 16 -38 39 -94 51 -124 11 -30 25 -64 29 -75 5 -11 16 -40 26 -65 9 -25 23 -58 30 -75 7 -16 20 -50 30 -75 9 -25 23 -58 30 -75 7 -16 20 -50 30 -75 9 -25 23 -58 30 -75 7 -16 20 -50 30 -75 9 -25 23 -58 30 -75 7 -16 20 -50 30 -75 9 -25 23 -58 31 -73 8 -16 14 -33 14 -39 0 -5 6 -24 14 -41 20 -48 44 -110 51 -132 3 -11 12 -28 19 -38 13 -17 17 -17 60 -3 25 9 54 20 63 25 10 5 38 17 63 26 25 9 59 23 75 30 17 7 52 21 79 32 26 10 50 24 53 30 3 7 -2 39 -11 70 -10 32 -23 81 -30 108 -19 70 -41 151 -59 215 -9 30 -23 84 -32 120 -9 36 -23 89 -31 118 -8 28 -21 77 -29 107 -44 165 -64 239 -88 325 -9 30 -23 84 -32 120 -10 36 -19 71 -21 78 -4 14 -5 14 -69 -3z"/>
<path class="yellow s left" d="M4247 2443 c-14 -4 -17 -11 -13 -28 3 -13 10 -270 16 -572 5 -301 13 -577 16 -611 4 -35 9 -240 13 -455 l6 -392 58 -3 c32 -2 108 4 170 12 61 9 135 16 164 16 29 0 99 6 155 14 57 8 148 17 203 21 112 6 157 15 163 33 2 6 -9 14 -25 18 -74 19 -217 134 -271 219 -74 117 -116 259 -110 375 l3 65 265 0 265 0 6 -60 c13 -119 78 -198 172 -210 142 -18 240 78 223 219 -6 57 -44 103 -111 137 -22 11 -47 24 -55 28 -17 10 -79 38 -125 57 -16 6 -48 20 -70 30 -22 9 -53 23 -70 30 -143 61 -252 131 -323 209 -28 31 -58 68 -66 83 -39 73 -54 114 -71 195 -17 83 -17 91 -1 175 10 48 24 101 31 117 8 17 16 37 19 45 6 16 28 52 36 60 3 3 21 25 39 48 43 55 38 59 -88 66 -53 4 -148 13 -211 21 -63 9 -140 15 -171 15 -30 0 -82 5 -115 10 -90 16 -107 17 -127 13z"/>
<path class="pink t" d="M8655 2428 c-22 -5 -71 -15 -110 -23 -38 -7 -104 -20 -145 -29 -114 -23 -231 -45 -274 -51 -70 -11 -26 -20 127 -25 l152 -5 3 -179 c2 -121 -1 -183 -9 -192 -8 -10 -51 -14 -168 -16 l-156 -3 -3 -645 c-1 -354 -6 -648 -11 -653 -6 -6 -277 -11 -408 -7 -10 0 -13 141 -15 653 l-3 652 -160 3 c-112 2 -161 6 -167 15 -4 6 -8 60 -8 120 l0 107 -27 0 c-15 0 -52 -6 -82 -14 -72 -18 -164 -37 -221 -45 -54 -7 -59 -24 -37 -104 23 -81 38 -139 46 -182 5 -22 14 -62 21 -90 7 -27 18 -72 25 -100 7 -27 18 -70 25 -95 6 -25 15 -63 19 -85 4 -22 12 -56 18 -75 6 -19 17 -57 23 -85 7 -27 19 -77 26 -110 8 -33 18 -78 23 -100 4 -22 12 -56 18 -75 12 -36 30 -108 43 -170 12 -55 30 -131 45 -185 8 -27 17 -67 20 -87 3 -22 14 -42 25 -48 10 -6 65 -15 122 -20 57 -6 144 -16 193 -22 50 -6 135 -14 190 -18 120 -10 277 -26 440 -45 148 -19 219 -19 233 -2 6 7 16 62 21 122 11 108 21 197 43 345 5 41 14 113 18 160 5 47 13 123 20 170 6 47 18 139 26 205 8 66 19 154 25 195 6 41 15 113 19 160 8 87 20 178 46 356 7 56 14 119 14 140 0 22 6 71 14 111 7 40 11 75 8 78 -7 7 -38 5 -87 -7z"/>
<path class="yellow l right" d="M1215 2334 c-63 -53 -115 -100 -115 -105 0 -5 39 -9 86 -9 139 0 124 70 124 -595 l0 -575 204 0 c112 0 211 -3 220 -6 12 -5 16 -21 16 -75 0 -81 7 -85 65 -31 23 20 92 82 155 137 169 146 155 132 139 151 -7 9 -18 24 -24 35 -11 19 -88 143 -117 188 -9 14 -23 36 -30 48 -47 80 -102 169 -108 173 -4 3 -10 12 -13 20 -4 8 -15 27 -25 42 -9 15 -37 60 -61 100 -24 40 -47 75 -51 78 -4 3 -10 12 -13 20 -4 8 -15 27 -25 42 -9 15 -37 60 -61 100 -24 40 -47 75 -51 78 -4 3 -10 12 -13 20 -4 8 -15 27 -25 42 -9 15 -43 70 -75 122 -32 53 -64 96 -72 96 -8 0 -66 -43 -130 -96z"/>
<path class="blue a right" d="M2815 2255 c-51 -13 -144 -30 -246 -45 -31 -4 -79 -12 -105 -18 -84 -18 -166 -33 -239 -43 -101 -13 -101 -13 -87 -166 7 -71 12 -171 12 -223 1 -52 5 -142 10 -200 5 -58 14 -207 20 -333 5 -125 14 -267 20 -315 5 -48 10 -134 10 -192 1 -148 16 -320 29 -333 7 -7 20 -6 46 6 45 22 88 40 145 62 25 9 59 23 75 30 17 7 50 20 75 30 25 9 59 23 75 30 17 7 50 20 75 30 25 9 59 23 75 30 17 7 50 20 75 30 25 9 59 23 75 30 17 7 50 20 75 30 25 9 59 23 75 30 17 7 50 20 75 30 25 9 58 23 73 31 16 8 33 14 39 14 5 0 24 6 41 14 18 7 57 23 87 35 84 34 91 37 150 64 l55 26 -76 1 c-50 0 -80 5 -87 13 -6 7 -22 48 -37 92 -14 43 -31 83 -38 87 -6 4 -117 8 -245 8 l-232 0 -19 -42 c-42 -95 -51 -119 -51 -133 0 -23 -32 -26 -215 -23 -190 3 -193 5 -161 73 9 18 16 38 16 43 0 6 6 23 14 39 16 32 26 55 57 133 11 30 27 69 34 85 7 17 21 50 30 75 10 25 23 59 30 75 7 17 21 50 30 75 10 25 23 59 30 75 7 17 21 50 30 75 10 25 23 59 30 75 7 17 21 50 30 75 10 25 23 59 30 75 8 17 28 66 45 110 18 44 38 94 45 110 7 17 20 47 29 68 26 60 22 67 -31 66 -27 0 -70 -7 -98 -14z"/>
<path class="yellow s right" d="M6180 2246 c0 -9 4 -24 9 -34 36 -69 69 -246 49 -269 -8 -11 -65 -13 -260 -11 l-250 3 -22 55 c-40 106 -72 130 -170 130 -114 0 -176 -57 -176 -164 0 -91 45 -123 400 -289 120 -55 168 -81 240 -128 62 -40 120 -95 165 -154 76 -101 95 -167 95 -330 0 -163 -21 -236 -100 -350 -49 -71 -49 -71 -110 -122 l-55 -46 65 7 c36 3 126 11 200 16 74 6 159 14 189 20 30 5 82 10 115 10 34 1 122 9 196 19 l135 17 -3 135 c-1 74 -9 224 -17 334 -22 303 -35 511 -45 715 -10 202 -27 371 -39 383 -4 4 -69 12 -145 17 -75 5 -140 11 -145 14 -4 3 -70 10 -147 15 -77 5 -147 13 -157 17 -12 4 -17 1 -17 -10z"/>
<path class="yellow l left" d="M854 2034 c-16 -14 -60 -51 -99 -82 -38 -31 -86 -71 -105 -88 -19 -18 -60 -51 -90 -75 -51 -40 -88 -70 -114 -94 -6 -6 -36 -30 -66 -55 -30 -25 -60 -49 -66 -55 -6 -5 -42 -35 -79 -65 -37 -30 -82 -68 -99 -83 l-31 -28 120 -116 c66 -64 232 -224 370 -357 324 -313 474 -457 495 -476 9 -8 33 -30 53 -49 l36 -34 28 23 c24 19 62 52 194 171 14 13 52 46 83 73 32 27 54 52 49 57 -5 5 -146 10 -313 11 l-305 3 -3 673 c-2 732 1 698 -58 646z"/>
<path class="blue a middle" d="M3142 1880 c-5 -14 -15 -43 -21 -65 -7 -22 -17 -53 -23 -70 -5 -16 -14 -46 -18 -65 -8 -33 -16 -59 -41 -132 -19 -55 -23 -108 -8 -108 97 -3 252 0 257 5 3 3 0 20 -7 38 -7 18 -16 48 -21 67 -4 19 -12 46 -17 60 -6 14 -18 52 -28 85 -9 33 -23 78 -31 100 -8 23 -14 50 -14 60 0 11 -4 27 -10 35 -7 12 -11 10 -18 -10z"/>
</g>
</svg></a><span> made with </span><span id="heart">❤️</span><span> by </span><a id="theme_author" href="http://dyingdown.github.io">o_oyao</a><br><span>©o_oyao 2019-2025</span></div><br><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="visits" id="busuanzi_container_site_pv"><div class="visits"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span>  | <i class="fa fa-fw fa-eye"></i> <span id="busuanzi_value_page_pv"></spsan></div></span></div></div><script src="/js/third-party/tools.js"></script><script src="/js/third-party/local-search.js"></script><script src="/js/Message.js"></script><script src="/js/last.js"></script><script src="/js/third-party/social-share.js"></script><script src="/js/third-party/qrcode.js"></script><script src="/js/third-party/tools.js"></script><script src="/js/third-party/clipboard.js"></script><script src="/js/post.js" type="module"></script><script src="https://use.typekit.net/bkt6ydm.js"></script></body></html>